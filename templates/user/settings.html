{% extends 'user/base.html' %}
{% block title %}Settings{% endblock %}
{% block
    extra_css %}
    <link rel="stylesheet"
          href="{{ url_for('static', filename='css/user/settings.css') }}" />
{% endblock %}
{% block content %}
    <div class="settings-wrapper">
        <!-- Profile Section to edit the username , email and the profile image-->
        <div class="profile-section">
            <div class="header">
                <img src="{{ url_for('static', filename = 'images/icons/profile.svg') }}"
                     alt="profile-logo" />
                <p>Profile</p>
            </div>
            <form action="{{ url_for("settings.profile_update") }}"
                  method="post"
                  enctype="multipart/form-data">
                <div class="form-body">
                    <div class="profile-img-update-wrapper">
                        <img id="profilePreview"
                             src="{{ url_for('static', filename=user_data[2]) }}"
                             alt="profile-pic" />
                        <label for="file" class="file-upload">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path d="M22.853,1.148a3.626,3.626,0,0,0-5.124,0L1.465,17.412A4.968,4.968,0,0,0,0,20.947V23a1,1,0,0,0,1,1H3.053a4.966,4.966,0,0,0,3.535-1.464L22.853,6.271A3.626,3.626,0,0,0,22.853,1.148ZM5.174,21.122A3.022,3.022,0,0,1,3.053,22H2V20.947a2.98,2.98,0,0,1,.879-2.121L15.222,6.483l2.3,2.3ZM21.438,4.857,18.932,7.364l-2.3-2.295,2.507-2.507a1.623,1.623,0,1,1,2.295,2.3Z" />
                            </svg>
                        </label>
                        <input type="file" id="file" name="image" accept="image/*" />
                    </div>
                    <div class="username-wrapper">
                        <p>Username</p>
                        <div>
                            <input class="username"
                                   type="text"
                                   name="username"
                                   value="{{ user_data[0] }}"
                                   readonly />
                            <button class="edit" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg"
                                     id="Outline"
                                     viewBox="0 0 24 24"
                                     width="512"
                                     height="512">
                                    <path d="M22.853,1.148a3.626,3.626,0,0,0-5.124,0L1.465,17.412A4.968,4.968,0,0,0,0,20.947V23a1,1,0,0,0,1,1H3.053a4.966,4.966,0,0,0,3.535-1.464L22.853,6.271A3.626,3.626,0,0,0,22.853,1.148ZM5.174,21.122A3.022,3.022,0,0,1,3.053,22H2V20.947a2.98,2.98,0,0,1,.879-2.121L15.222,6.483l2.3,2.3ZM21.438,4.857,18.932,7.364l-2.3-2.295,2.507-2.507a1.623,1.623,0,1,1,2.295,2.3Z" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="email-wrapper">
                        <p>E-mail</p>
                        <div>
                            <input class="email"
                                   type="email"
                                   name="email"
                                   value="{{ user_data[1] }}"
                                   readonly />
                            <button class="edit" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg"
                                     id="Outline"
                                     viewBox="0 0 24 24"
                                     width="512"
                                     height="512">
                                    <path d="M22.853,1.148a3.626,3.626,0,0,0-5.124,0L1.465,17.412A4.968,4.968,0,0,0,0,20.947V23a1,1,0,0,0,1,1H3.053a4.966,4.966,0,0,0,3.535-1.464L22.853,6.271A3.626,3.626,0,0,0,22.853,1.148ZM5.174,21.122A3.022,3.022,0,0,1,3.053,22H2V20.947a2.98,2.98,0,0,1,.879-2.121L15.222,6.483l2.3,2.3ZM21.438,4.857,18.932,7.364l-2.3-2.295,2.507-2.507a1.623,1.623,0,1,1,2.295,2.3Z" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                <button type="submit" class="update-btn">Update</button>
            </form>
        </div>
        <!--End of the profile section-->
        <!-- Password changing section-->
        <div class="change-password-section">
            <div class="header">
                <img src="{{ url_for('static', filename = 'images/icons/password.svg') }}"
                     alt="password-lock-icon" />
                <p>Change the Password</p>
            </div>
            <form action="{{ url_for("settings.change_password") }}" method="post">
                <div class="form-body">
                    <div class="current-password-entry-wrapper">
                        <input type="password"
                               name="currentPassword"
                               id="currentPassword"
                               required="required"
                               value="" />
                        <label for="name">Current Password</label>
                        <!--Added svg code directly because it is easy to handle with css and JS, rather than adding as <img> tag-->
                        <svg xmlns="http://www.w3.org/2000/svg"
                             id="Outline"
                             viewBox="0 0 24 24"
                             width="512"
                             height="512"
                             class="closed-eye-img-pass">
                            <path d="M23.271,9.419A15.866,15.866,0,0,0,19.9,5.51l2.8-2.8a1,1,0,0,0-1.414-1.414L18.241,4.345A12.054,12.054,0,0,0,12,2.655C5.809,2.655,2.281,6.893.729,9.419a4.908,4.908,0,0,0,0,5.162A15.866,15.866,0,0,0,4.1,18.49l-2.8,2.8a1,1,0,1,0,1.414,1.414l3.052-3.052A12.054,12.054,0,0,0,12,21.345c6.191,0,9.719-4.238,11.271-6.764A4.908,4.908,0,0,0,23.271,9.419ZM2.433,13.534a2.918,2.918,0,0,1,0-3.068C3.767,8.3,6.782,4.655,12,4.655A10.1,10.1,0,0,1,16.766,5.82L14.753,7.833a4.992,4.992,0,0,0-6.92,6.92l-2.31,2.31A13.723,13.723,0,0,1,2.433,13.534ZM15,12a3,3,0,0,1-3,3,2.951,2.951,0,0,1-1.285-.3L14.7,10.715A2.951,2.951,0,0,1,15,12ZM9,12a3,3,0,0,1,3-3,2.951,2.951,0,0,1,1.285.3L9.3,13.285A2.951,2.951,0,0,1,9,12Zm12.567,1.534C20.233,15.7,17.218,19.345,12,19.345A10.1,10.1,0,0,1,7.234,18.18l2.013-2.013a4.992,4.992,0,0,0,6.92-6.92l2.31-2.31a13.723,13.723,0,0,1,3.09,3.529A2.918,2.918,0,0,1,21.567,13.534Z" />
                        </svg>
                        <svg class="eye-img-pass"
                             xmlns="http://www.w3.org/2000/svg"
                             id="Outline"
                             viewBox="0 0 24 24"
                             width="512"
                             height="512">
                            <path d="M23.271,9.419C21.72,6.893,18.192,2.655,12,2.655S2.28,6.893.729,9.419a4.908,4.908,0,0,0,0,5.162C2.28,17.107,5.808,21.345,12,21.345s9.72-4.238,11.271-6.764A4.908,4.908,0,0,0,23.271,9.419Zm-1.705,4.115C20.234,15.7,17.219,19.345,12,19.345S3.766,15.7,2.434,13.534a2.918,2.918,0,0,1,0-3.068C3.766,8.3,6.781,4.655,12,4.655s8.234,3.641,9.566,5.811A2.918,2.918,0,0,1,21.566,13.534Z" />
                            <path d="M12,7a5,5,0,1,0,5,5A5.006,5.006,0,0,0,12,7Zm0,8a3,3,0,1,1,3-3A3,3,0,0,1,12,15Z" />
                        </svg>
                    </div>
                    <div class="new-passwords-wrapper">
                        <div class="new-password-entry-wrapper">
                            <input type="password"
                                   name="new-password"
                                   id="new-password"
                                   required="required"
                                   value="" />
                            <label for="name">New Password</label>
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 id="Outline"
                                 viewBox="0 0 24 24"
                                 width="512"
                                 height="512"
                                 class="closed-eye-img-pass">
                                <path d="M23.271,9.419A15.866,15.866,0,0,0,19.9,5.51l2.8-2.8a1,1,0,0,0-1.414-1.414L18.241,4.345A12.054,12.054,0,0,0,12,2.655C5.809,2.655,2.281,6.893.729,9.419a4.908,4.908,0,0,0,0,5.162A15.866,15.866,0,0,0,4.1,18.49l-2.8,2.8a1,1,0,1,0,1.414,1.414l3.052-3.052A12.054,12.054,0,0,0,12,21.345c6.191,0,9.719-4.238,11.271-6.764A4.908,4.908,0,0,0,23.271,9.419ZM2.433,13.534a2.918,2.918,0,0,1,0-3.068C3.767,8.3,6.782,4.655,12,4.655A10.1,10.1,0,0,1,16.766,5.82L14.753,7.833a4.992,4.992,0,0,0-6.92,6.92l-2.31,2.31A13.723,13.723,0,0,1,2.433,13.534ZM15,12a3,3,0,0,1-3,3,2.951,2.951,0,0,1-1.285-.3L14.7,10.715A2.951,2.951,0,0,1,15,12ZM9,12a3,3,0,0,1,3-3,2.951,2.951,0,0,1,1.285.3L9.3,13.285A2.951,2.951,0,0,1,9,12Zm12.567,1.534C20.233,15.7,17.218,19.345,12,19.345A10.1,10.1,0,0,1,7.234,18.18l2.013-2.013a4.992,4.992,0,0,0,6.92-6.92l2.31-2.31a13.723,13.723,0,0,1,3.09,3.529A2.918,2.918,0,0,1,21.567,13.534Z" />
                            </svg>
                            <svg class="eye-img-pass"
                                 xmlns="http://www.w3.org/2000/svg"
                                 id="Outline"
                                 viewBox="0 0 24 24"
                                 width="512"
                                 height="512">
                                <path d="M23.271,9.419C21.72,6.893,18.192,2.655,12,2.655S2.28,6.893.729,9.419a4.908,4.908,0,0,0,0,5.162C2.28,17.107,5.808,21.345,12,21.345s9.72-4.238,11.271-6.764A4.908,4.908,0,0,0,23.271,9.419Zm-1.705,4.115C20.234,15.7,17.219,19.345,12,19.345S3.766,15.7,2.434,13.534a2.918,2.918,0,0,1,0-3.068C3.766,8.3,6.781,4.655,12,4.655s8.234,3.641,9.566,5.811A2.918,2.918,0,0,1,21.566,13.534Z" />
                                <path d="M12,7a5,5,0,1,0,5,5A5.006,5.006,0,0,0,12,7Zm0,8a3,3,0,1,1,3-3A3,3,0,0,1,12,15Z" />
                            </svg>
                        </div>
                        <div class="confirm-new-password-entry-wrapper">
                            <input type="password"
                                   name="confirm-new-password"
                                   id="confirm-new-password"
                                   required="required"
                                   value="" />
                            <label for="name">Comfirm New Password</label>
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 id="Outline"
                                 viewBox="0 0 24 24"
                                 width="512"
                                 height="512"
                                 class="closed-eye-img-pass">
                                <path d="M23.271,9.419A15.866,15.866,0,0,0,19.9,5.51l2.8-2.8a1,1,0,0,0-1.414-1.414L18.241,4.345A12.054,12.054,0,0,0,12,2.655C5.809,2.655,2.281,6.893.729,9.419a4.908,4.908,0,0,0,0,5.162A15.866,15.866,0,0,0,4.1,18.49l-2.8,2.8a1,1,0,1,0,1.414,1.414l3.052-3.052A12.054,12.054,0,0,0,12,21.345c6.191,0,9.719-4.238,11.271-6.764A4.908,4.908,0,0,0,23.271,9.419ZM2.433,13.534a2.918,2.918,0,0,1,0-3.068C3.767,8.3,6.782,4.655,12,4.655A10.1,10.1,0,0,1,16.766,5.82L14.753,7.833a4.992,4.992,0,0,0-6.92,6.92l-2.31,2.31A13.723,13.723,0,0,1,2.433,13.534ZM15,12a3,3,0,0,1-3,3,2.951,2.951,0,0,1-1.285-.3L14.7,10.715A2.951,2.951,0,0,1,15,12ZM9,12a3,3,0,0,1,3-3,2.951,2.951,0,0,1,1.285.3L9.3,13.285A2.951,2.951,0,0,1,9,12Zm12.567,1.534C20.233,15.7,17.218,19.345,12,19.345A10.1,10.1,0,0,1,7.234,18.18l2.013-2.013a4.992,4.992,0,0,0,6.92-6.92l2.31-2.31a13.723,13.723,0,0,1,3.09,3.529A2.918,2.918,0,0,1,21.567,13.534Z" />
                            </svg>
                            <svg class="eye-img-pass"
                                 xmlns="http://www.w3.org/2000/svg"
                                 id="Outline"
                                 viewBox="0 0 24 24"
                                 width="512"
                                 height="512">
                                <path d="M23.271,9.419C21.72,6.893,18.192,2.655,12,2.655S2.28,6.893.729,9.419a4.908,4.908,0,0,0,0,5.162C2.28,17.107,5.808,21.345,12,21.345s9.72-4.238,11.271-6.764A4.908,4.908,0,0,0,23.271,9.419Zm-1.705,4.115C20.234,15.7,17.219,19.345,12,19.345S3.766,15.7,2.434,13.534a2.918,2.918,0,0,1,0-3.068C3.766,8.3,6.781,4.655,12,4.655s8.234,3.641,9.566,5.811A2.918,2.918,0,0,1,21.566,13.534Z" />
                                <path d="M12,7a5,5,0,1,0,5,5A5.006,5.006,0,0,0,12,7Zm0,8a3,3,0,1,1,3-3A3,3,0,0,1,12,15Z" />
                            </svg>
                        </div>
                    </div>
                </div>
                <button type="submit" class="update-btn">Update</button>
            </form>
        </div>
        <!--End of password changing section-->
        <!--Posting Feedback about the app section-->
        <div class="post-comment-section">
            <div class="header">
                <img src="{{ url_for('static', filename = 'images/icons/comment.svg') }}"
                     alt="comment-ico" />
                <p>Comments</p>
            </div>
            <form>
                <div class="form-body">
                    <textarea name="comment" placeholder="Let us know what you think..."></textarea>
                    <div class="stars-wrapper">
                        {% for i in range(5) %}
                            <button class="star {{ i }}-button" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg"
                                     id="Outline"
                                     viewBox="0 0 24 24"
                                     width="512"
                                     height="512">
                                    <path d="M23.836,8.794a3.179,3.179,0,0,0-3.067-2.226H16.4L15.073,2.432a3.227,3.227,0,0,0-6.146,0L7.6,6.568H3.231a3.227,3.227,0,0,0-1.9,5.832L4.887,15,3.535,19.187A3.178,3.178,0,0,0,4.719,22.8a3.177,3.177,0,0,0,3.8-.019L12,20.219l3.482,2.559a3.227,3.227,0,0,0,4.983-3.591L19.113,15l3.56-2.6A3.177,3.177,0,0,0,23.836,8.794Zm-2.343,1.991-4.144,3.029a1,1,0,0,0-.362,1.116L18.562,19.8a1.227,1.227,0,0,1-1.895,1.365l-4.075-3a1,1,0,0,0-1.184,0l-4.075,3a1.227,1.227,0,0,1-1.9-1.365L7.013,14.93a1,1,0,0,0-.362-1.116L2.507,10.785a1.227,1.227,0,0,1,.724-2.217h5.1a1,1,0,0,0,.952-.694l1.55-4.831a1.227,1.227,0,0,1,2.336,0l1.55,4.831a1,1,0,0,0,.952.694h5.1a1.227,1.227,0,0,1,.724,2.217Z" />
                                </svg>
                            </button>
                        {% endfor %}
                    </div>
                </div>
                <button class="send-btn" type="submit">Send</button>
            </form>
        </div>
        <!--End of feedback section-->
        <!--Delete Account section-->
        <div class="delete-account-section">
            <div class="header">
                <img src="{{ url_for('static', filename = 'images/icons/bin.svg') }}"
                     alt="bin-ico" />
                <p>Delete Account</p>
            </div>
            <p class="warning-txt">Warning: This will permanently delete your all account details</p>
            <form action="{{ url_for("settings.delete_account") }}" method="post">
                <input type="hidden" value="delete" name="delete" />
                <button class="delete-btn" type="submit">Delete My account</button>
            </form>
        </div>
        <!--End of delete account section-->
    </div>
    <!--Error box -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages
            %}
            {% for category, message in messages %}
                {% if category == 'error' %}
                    <div class="error-box-wrapper">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             id="Outline"
                             viewBox="0 0 24 24"
                             width="512"
                             height="512">
                            <path d="M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm0,22A10,10,0,1,1,22,12,10.011,10.011,0,0,1,12,22Z" />
                            <path d="M12,5a1,1,0,0,0-1,1v8a1,1,0,0,0,2,0V6A1,1,0,0,0,12,5Z" />
                            <rect x="11" y="17" width="2" height="2" rx="1" />
                        </svg>
                        <p>{{ message }}</p>
                        <svg xmlns="http://www.w3.org/2000/svg"
                             id="Outline"
                             viewBox="0 0 24 24"
                             width="512"
                             height="512"
                             class="cross-icon">
                            <path d="M23.707.293h0a1,1,0,0,0-1.414,0L12,10.586,1.707.293a1,1,0,0,0-1.414,0h0a1,1,0,0,0,0,1.414L10.586,12,.293,22.293a1,1,0,0,0,0,1.414h0a1,1,0,0,0,1.414,0L12,13.414,22.293,23.707a1,1,0,0,0,1.414,0h0a1,1,0,0,0,0-1.414L13.414,12,23.707,1.707A1,1,0,0,0,23.707.293Z" />
                        </svg>
                    </div>
                {% endif %}
            {% endfor %}
        {% endif %}
    {% endwith %}
    <!--End of the error box-->
{% endblock %}
{% block extra_js %}
    <script>const sendFeedback = '{{ url_for("settings.feedback") }}';</script>
    <script src="{{ url_for('static', filename='js/user/settings.js') }}"></script>
{% endblock %}
